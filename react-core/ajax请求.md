前端开发会经常遇到这样的场景，依据筛选条件通过ajax来获取表格数据，表格经常包含分页功能。


一般场景下，我们通过下面两种方式来fetch数据
- 将ajax请求所需的参数作为`useEffect`的`deps`，每次参数更新的时候，自动触发fetch
- 将ajax请求封装成一个函数，监听用户操作，代码触发请求


### useEffect ajax
这种请求方式，只要写对`useEffect`的`deps`，每次请求ajax都能获取到最新的参数，能保障用户操作和请求的一致性

但是存在以下的一些问题
- 比如说input输入框，触发非常频繁，这种场景下即便节流，对后端接口的压力也比较大
- ajax的竟态问题，频繁触发的effect，需要主要参数是否能对上
- 表格数据的筛选一般都有一个确认按钮，用户点击确认应该触发ajax，但是此时数据并未改变，无法触发useEffect


### function ajax
封装参数，通过func调用的方式来获取数据，其中有些地方有些许差别
- 函数不带参数，所有的参数均从function component的state里面拿
- 函数带参数，ajax请求的全部参数都从函数参数中组装

#### 带参数场景
这种方式能满足绝大部分请求，些许痛点在于：如果ajax的请求的参数比较繁琐，每次调用函数入参组装比较麻烦

请求方面，可以通过ahooks的`useRequest`的方式来做

#### 不带参数场景
绝大部分场景是可以满足的，但是，比如说table分页器onChange的时候，一般操作是更改分页器的props，触发ajax请求。ajax请求参数需要page、pageSize等参数，但是这个时候函数无法获取到最新的state


通过react的`useRef`的方式来获取最新的状态
